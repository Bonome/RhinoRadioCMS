{% import "_macros.html" as macros %}

<section class="solo">
    <div class="title">
        {% include 'svg/title_podcasts.svg' %}
    </div>


{% for elem in podcasts %}
<article class="widgetBis">
    <div class="flex">
        <a class="picto content-link" href="{{ url_for('main.play', id=elem.id) }}">
            {% include 'svg/small_play.svg' -%}
        </a>
        <div class="bloc name">
            <h3> {{ elem.name }} </h3>
            {% if elem.channel.name %}
            <h3><a class="content-link" href="">{{ elem.channel.name|upper }}</a></h3>
            {% endif %}
        </div>
    </div>
    <span class="license">{{ elem.date|format_date }}</span>

    {% if elem.collectives|length > 0 %}
    <p class="marg decal">Par
    {% for collective in elem.collectives %}
        <a class="content-link"
            href="{{ url_for('main.collective', id=collective.id) }}">
        {{ collective.name -}}
        </a>
        {%- if not loop.last %}, {% endif %}
    {% endfor %}
    </p>
    {% endif %}

    {% if elem.contributors|length > 0 %}
    <p class="marg decal">Avec
    {% for contributor in elem.contributors %}
        <a class="content-link"
            href="{{ url_for('main.contributor', id=contributor.id) }}">
        {{ contributor.name -}}
        </a>
        {%- if not loop.last %}, {% endif %}
    {% endfor %}
    </p>
    {% endif %}

    {% if elem.description %}
    <div class="marg2 decal">
        {{ elem.description|safe|truncate(100, False) }}
    </div>
    {% endif %}
</article>
<p class="more"><a class="content-link" href="{{ url_for('main.podcast', id=elem.id) }}">more</a></p>
{% endfor %}


<div class="pagination">
{{ macros.pagination_widget(pagination, 'main.podcasts') }}
</div>

</section>
